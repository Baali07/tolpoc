<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PostMessage Test</title>
</head>
<body>
  <h1>PostMessage Test Page</h1>
  <script>
    // مثال لبنية رسالة يمكن أن يتوقعها parent (تُعدّل بناءً على فحصك السابق)
    const message = {
      direction: "from-toloka-script", // مفتاح يُستخدم للتصفية
      vscodeMessage: {
        command: "workbench.action.files.openFileFolder",
        arguments: []
      },
      vscodeScheduleAsyncWork: 1234
    };

    // ننتظر قليلًا قبل الإرسال للتأكد أن الصفحة جاهزة
    setTimeout(() => {
      console.log("📤 Sending postMessage to parent...");
      parent.postMessage(message, "*");
    }, 1000);

    // مراقبة أي رد من النافذة الأم
    window.addEventListener("message", (event) => {
      console.log("📥 Received message from parent:", event.data);
    });
  </script>
</body>
</html>
